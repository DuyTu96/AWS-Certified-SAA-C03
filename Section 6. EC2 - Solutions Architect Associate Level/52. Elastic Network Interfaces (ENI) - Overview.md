### ğŸ§  TÃ³m táº¯t kiáº¿n thá»©c: **Elastic Network Interface (ENI)** trong AWS

---

## ğŸŒ ENI lÃ  gÃ¬?

ENI (Elastic Network Interface) lÃ  **card máº¡ng áº£o** trong Amazon VPC.
NÃ³ lÃ  **thÃ nh pháº§n máº¡ng logic** gáº¯n vÃ o EC2 instance, giÃºp instance **giao tiáº¿p vá»›i máº¡ng**.

---

## ğŸ”§ Cáº¥u trÃºc vÃ  thuá»™c tÃ­nh cá»§a ENI:

| ThÃ nh pháº§n               | Ã nghÄ©a                                                                |
| ------------------------ | ---------------------------------------------------------------------- |
| **Primary private IPv4** | Äá»‹a chá»‰ IP chÃ­nh (báº¯t buá»™c)                                            |
| **Secondary IPv4**       | CÃ³ thá»ƒ cÃ³ thÃªm nhiá»u IP phá»¥                                            |
| **Elastic IP (EIP)**     | Gáº¯n vá»›i private IP Ä‘á»ƒ truy cáº­p tá»« internet                             |
| **Public IPv4**          | CÃ³ thá»ƒ cáº¥p phÃ¡t thÃªm                                                   |
| **Security Groups**      | ENI cÃ³ thá»ƒ Ä‘Æ°á»£c gÃ¡n 1 hoáº·c nhiá»u security group                        |
| **MAC Address**          | Má»—i ENI cÃ³ Ä‘á»‹a chá»‰ MAC riÃªng biá»‡t                                      |
| **Gáº¯n vá»›i EC2**          | CÃ³ thá»ƒ gáº¯n/detach ENI vá»›i EC2 **dynamically** (khi instance Ä‘ang cháº¡y) |
| **AZ-bound**             | ENI chá»‰ hoáº¡t Ä‘á»™ng trong **1 Availability Zone cá»¥ thá»ƒ**                 |

---

## ğŸ–¥ï¸ ENI trÃªn EC2 hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?

* Khi báº¡n táº¡o EC2, nÃ³ sáº½ cÃ³ Ã­t nháº¥t **1 ENI máº·c Ä‘á»‹nh (`eth0`)**.
* Báº¡n cÃ³ thá»ƒ táº¡o thÃªm ENI má»›i vÃ  gáº¯n vÃ o EC2 dÆ°á»›i dáº¡ng **eth1**, **eth2**, v.v.
* Má»—i ENI cÃ³ thá»ƒ cáº¥p thÃªm IP má»›i cho instance.

### âœ… VÃ­ dá»¥:

1. EC2-1 cÃ³:

   * `eth0`: Primary ENI â†’ Private IP: `10.0.0.10`
   * `eth1`: Secondary ENI â†’ Private IP: `10.0.0.20`
2. ENI `eth1` cÃ³ thá»ƒ Ä‘Æ°á»£c **tÃ¡ch ra khá»i EC2-1** vÃ  **gáº¯n vÃ o EC2-2**.

   * â†’ IP `10.0.0.20` "chuyá»ƒn" tá»« EC2-1 sang EC2-2.

---

## ğŸ” TrÆ°á»ng há»£p sá»­ dá»¥ng (Use cases):

| TÃ¬nh huá»‘ng                         | LÃ½ do sá»­ dá»¥ng ENI                               |
| ---------------------------------- | ----------------------------------------------- |
| **Failover máº¡ng**                  | Di chuyá»ƒn ENI + IP giá»¯a cÃ¡c EC2 instance        |
| **High availability**              | Táº¡o backup EC2, chuyá»ƒn ENI khi mÃ¡y chÃ­nh bá»‹ lá»—i |
| **á»¨ng dá»¥ng yÃªu cáº§u nhiá»u IP máº¡ng** | Gáº¯n thÃªm ENI cÃ³ secondary IP                    |
| **TÃ¡ch biá»‡t traffic**              | ENI riÃªng cho public / private traffic          |
| **Firewall/VPN appliances**        | Cáº§n nhiá»u interface Ä‘á»ƒ routing khÃ¡c nhau        |

---

## ğŸ“Œ LÆ°u Ã½:

* ENI **khÃ´ng thá»ƒ di chuyá»ƒn giá»¯a AZ khÃ¡c nhau**.
* ENI cÃ³ thá»ƒ Ä‘Æ°á»£c **táº¡o Ä‘á»™c láº­p** rá»“i gáº¯n vÃ o EC2 sau.
* Ráº¥t há»¯u Ã­ch trong cÃ¡c kiáº¿n trÃºc **HA (High Availability)** hoáº·c **máº¡ng nÃ¢ng cao** nhÆ° firewall/VPN.

---

DÆ°á»›i Ä‘Ã¢y lÃ  sÆ¡ Ä‘á»“ mÃ´ phá»ng cÃ¡ch di chuyá»ƒn má»™t **Elastic Network Interface (ENI)** giá»¯a hai EC2 instance trong cÃ¹ng **Availability Zone**, thá»ƒ hiá»‡n báº±ng Markdown:

---

### ğŸ–¼ï¸ SÆ¡ Ä‘á»“ di chuyá»ƒn ENI (`eth1`) tá»« EC2-1 sang EC2-2

```plaintext
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  EC2-1     â”‚                        â”‚  EC2-2     â”‚
           â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
           â”‚  eth0      â”‚â”€â”€â”€â–º 10.0.0.10          â”‚  eth0      â”‚â”€â”€â”€â–º 10.0.0.11
           â”‚  eth1      â”‚â”€â”€â”€â–º 10.0.0.20          â”‚            â”‚
           â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                                      â–²
                â”‚       ğŸ”„ Di chuyá»ƒn ENI (eth1)         â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               10.0.0.20
```

---

### ğŸ“ Sau khi di chuyá»ƒn:

* `EC2-1` cÃ²n láº¡i: `eth0` â†’ `10.0.0.10`
* `EC2-2` nháº­n thÃªm `eth1` â†’ `10.0.0.20`

---

### âœ… Káº¿t quáº£:

* **IP 10.0.0.20** Ä‘Æ°á»£c chuyá»ƒn tá»« EC2-1 sang EC2-2.
* PhÃ¹ há»£p vá»›i ká»‹ch báº£n **failover**, khÃ´ng cáº§n thay Ä‘á»•i DNS hoáº·c client config.

### T√≥m t·∫Øt ki·∫øn th·ª©c: **Elastic Network Interfaces (ENI)** trong AWS EC2

Elastic Network Interface (ENI) l√† th√†nh ph·∫ßn m·∫°ng trong AWS EC2, ƒë·∫°i di·ªán cho m·ªôt **card m·∫°ng ·∫£o (virtual NIC)** c√≥ th·ªÉ g·∫Øn v√†o ho·∫∑c th√°o ra kh·ªèi EC2 instance m·ªôt c√°ch linh ho·∫°t.

---

## üéØ M·ª•c ƒë√≠ch c·ªßa b√†i th·ª±c h√†nh

* T·∫°o v√† g·∫Øn nhi·ªÅu ENI v√†o m·ªôt EC2 instance.
* Th·ª±c hi·ªán **network failover th·ªß c√¥ng** b·∫±ng c√°ch **chuy·ªÉn ENI gi·ªØa c√°c instance**.
* Quan s√°t h√†nh vi khi instance b·ªã terminate.

---

## üß± C√°c b∆∞·ªõc ƒë√£ th·ª±c hi·ªán

### 1. **Kh·ªüi t·∫°o 2 EC2 instances**

* S·ª≠ d·ª•ng Amazon Linux 2, lo·∫°i `t2.micro`.
* D√πng security group m·∫∑c ƒë·ªãnh.
* M·ªói instance t·ª± ƒë·ªông c√≥ 1 ENI m·∫∑c ƒë·ªãnh k√®m theo:

  * `Private IPv4`
  * `Public IPv4` (n·∫øu c·∫•u h√¨nh)
  * `Private DNS`

---

### 2. **T·∫°o 1 ENI th·ªß c√¥ng**

* Ch·ªçn subnet t∆∞∆°ng ·ª©ng (v√≠ d·ª• `us-east-2a`).
* Cho ph√©p t·ª± ƒë·ªông g√°n `Private IPv4`.
* G√°n security group ph√π h·ª£p.
* ENI m·ªõi ·ªü tr·∫°ng th√°i **available**, ch∆∞a g·∫Øn v√†o instance n√†o.

---

### 3. **G·∫Øn ENI v√†o m·ªôt instance**

* T·ª´ giao di·ªán ENI ‚Üí Actions ‚Üí Attach ‚Üí ch·ªçn EC2 instance.
* Instance n√†y b√¢y gi·ªù c√≥ **2 ENI** (1 ch√≠nh, 1 ph·ª•).
* **ENI ph·ª• ch·ªâ c√≥ Private IP**, kh√¥ng c√≥ Public IP.

---

### 4. **Di chuy·ªÉn ENI gi·ªØa c√°c instances**

* T·ª´ giao di·ªán ENI ‚Üí Detach (c√≥ th·ªÉ c·∫ßn Force).
* G·∫Øn l·∫°i v√†o EC2 th·ª© hai.
* Ki·ªÉm tra ‚Üí instance ƒë·∫ßu ti√™n m·∫•t ENI ph·ª•, instance th·ª© hai nh·∫≠n ENI ƒë√≥.
* ƒêi·ªÅu n√†y cho ph√©p **failover nhanh**, n·∫øu 2 EC2 ch·∫°y c√πng ·ª©ng d·ª•ng n·ªôi b·ªô.

---

### 5. **Terminate c√°c EC2 instance**

* Hai ENI m·∫∑c ƒë·ªãnh (t·∫°o c√πng EC2) s·∫Ω b·ªã **x√≥a t·ª± ƒë·ªông**.
* ENI t·∫°o th·ªß c√¥ng **v·∫´n c√≤n t·ªìn t·∫°i**, v√¨ kh√¥ng li√™n k·∫øt v·ªõi EC2 n√†o.

---

## ‚úÖ L·ª£i √≠ch c·ªßa s·ª≠ d·ª•ng ENI

| T√≠nh nƒÉng                   | L·ª£i √≠ch                                      |
| --------------------------- | -------------------------------------------- |
| **Di chuy·ªÉn linh ho·∫°t**     | G·∫Øn / th√°o ra kh·ªèi EC2 d·ªÖ d√†ng               |
| **Gi·ªØ nguy√™n IP**           | Gi·ªØ IP d√π EC2 thay ƒë·ªïi (n·ªôi b·ªô)              |
| **Ph·ª•c v·ª• failover**        | G·∫Øn ENI v√†o EC2 kh√°c ƒë·ªÉ chuy·ªÉn traffic nhanh |
| **T√°ch bi·ªát c·∫•u h√¨nh m·∫°ng** | C√≥ th·ªÉ g√°n nhi·ªÅu ENI v·ªõi IP, SG kh√°c nhau    |

---

## üìå L∆∞u √Ω

* **ENI m·∫∑c ƒë·ªãnh** b·ªã x√≥a khi instance b·ªã terminate.
* **ENI t·∫°o th·ªß c√¥ng** kh√¥ng t·ª± b·ªã x√≥a ‚Üí b·∫°n c√≥ th·ªÉ d√πng l·∫°i ho·∫∑c x√≥a th·ªß c√¥ng.
* Kh√¥ng m·∫•t ph√≠ khi ENI **kh√¥ng g·∫Øn v√†o EC2**.
* https://aws.amazon.com/vi/blogs/aws/new-elastic-network-interfaces-in-the-virtual-private-cloud/
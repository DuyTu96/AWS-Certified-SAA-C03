### Tá»•ng há»£p kiáº¿n thá»©c: **EC2 Hibernate**

---

### ğŸ’¡ **EC2 Hibernate lÃ  gÃ¬?**

EC2 Hibernate lÃ  má»™t tÃ­nh nÄƒng giÃºp báº¡n **báº£o toÃ n tráº¡ng thÃ¡i RAM** cá»§a instance khi dá»«ng (stop), Ä‘á»ƒ khi khá»Ÿi Ä‘á»™ng láº¡i, instance trá»Ÿ láº¡i **chÃ­nh xÃ¡c tráº¡ng thÃ¡i trÆ°á»›c Ä‘Ã³**, nhÆ° thá»ƒ chÆ°a tá»«ng táº¯t.

---

## ğŸ§  So sÃ¡nh vá»›i cÃ¡c tráº¡ng thÃ¡i thÃ´ng thÆ°á»ng:

| Tráº¡ng thÃ¡i    | RAM                 | á»” Ä‘Ä©a (EBS root volume)          | Khá»Ÿi Ä‘á»™ng láº¡i              | Tá»‘c Ä‘á»™ |
| ------------- | ------------------- | -------------------------------- | -------------------------- | ------ |
| **Stop**      | âŒ Máº¥t               | âœ… Giá»¯ láº¡i                        | Reboot Ä‘áº§y Ä‘á»§              | Cháº­m   |
| **Terminate** | âŒ Máº¥t               | âŒ Máº¥t náº¿u khÃ´ng cáº¥u hÃ¬nh giá»¯ láº¡i | KhÃ´ng thá»ƒ                  | -      |
| **Hibernate** | âœ… Giá»¯ (ghi vÃ o EBS) | âœ… Giá»¯ láº¡i                        | Trá»Ÿ láº¡i ngay tráº¡ng thÃ¡i cÅ© | Nhanh  |

---

## ğŸ”„ **CÃ¡ch hoáº¡t Ä‘á»™ng cá»§a Hibernate**

1. Khi báº¡n chá»n **Hibernate**, tráº¡ng thÃ¡i RAM Ä‘Æ°á»£c **ghi xuá»‘ng EBS root volume**.
2. Instance chuyá»ƒn sang tráº¡ng thÃ¡i `stopping`, rá»“i `stopped`.
3. Khi khá»Ÿi Ä‘á»™ng láº¡i, RAM Ä‘Æ°á»£c **táº£i láº¡i tá»« EBS** â†’ Há»‡ Ä‘iá»u hÃ nh vÃ  á»©ng dá»¥ng tiáº¿p tá»¥c **tá»« Ä‘Ãºng thá»i Ä‘iá»ƒm Ä‘Ã£ hibernate**.
4. KhÃ´ng cáº§n khá»Ÿi Ä‘á»™ng láº¡i OS hay cháº¡y láº¡i User Data script.

---

## ğŸ“¦ **YÃªu cáº§u ká»¹ thuáº­t**

| YÃªu cáº§u                        | MÃ´ táº£                                                                      |
| ------------------------------ | -------------------------------------------------------------------------- |
| **RAM**                        | Tá»‘i Ä‘a 150 GB (cÃ³ thá»ƒ thay Ä‘á»•i)                                            |
| **Root volume**                | Pháº£i lÃ  EBS, **Ä‘Æ°á»£c mÃ£ hÃ³a (encrypted)**, Ä‘á»§ dung lÆ°á»£ng Ä‘á»ƒ chá»©a RAM        |
| **Loáº¡i instance**              | KhÃ´ng há»— trá»£ **bare metal**, há»— trá»£ nhiá»u loáº¡i (on-demand, spot, reserved) |
| **OS há»— trá»£**                  | Windows, Linux                                                             |
| **Thá»i gian hibernate tá»‘i Ä‘a** | 60 ngÃ y (tÃ¹y thá»i Ä‘iá»ƒm)                                                    |

---

## ğŸ› ï¸ **Use cases cho Hibernate**

* ğŸ•“ **á»¨ng dá»¥ng máº¥t thá»i gian Ä‘á»ƒ khá»Ÿi Ä‘á»™ng**: Web server, microservice cáº§n warm cache, khá»Ÿi táº¡o mÃ´i trÆ°á»ng.
* ğŸ“ˆ **QuÃ¡ trÃ¬nh tÃ­nh toÃ¡n dÃ i**: Muá»‘n táº¡m dá»«ng vÃ  tiáº¿p tá»¥c sau mÃ  khÃ´ng máº¥t káº¿t quáº£ trung gian.
* ğŸ”Œ **Tiáº¿t kiá»‡m chi phÃ­**: Hibernate khi khÃ´ng sá»­ dá»¥ng mÃ  váº«n giá»¯ tráº¡ng thÃ¡i RAM.
* ğŸ§ª **Dev/test environment**: Muá»‘n báº£o toÃ n session/debug session khi táº¯t má»Ÿ láº¡i.

---

## ğŸ“Œ LÆ°u Ã½

* Hibernate thÆ°á»ng **khÃ´ng thay tháº¿ hoÃ n toÃ n stop/terminate**, chá»‰ há»¯u Ã­ch khi báº¡n **cáº§n giá»¯ nguyÃªn tráº¡ng thÃ¡i phiÃªn lÃ m viá»‡c**.
* Pháº£i lÃªn káº¿ hoáº¡ch vá» **dung lÆ°á»£ng EBS root** vÃ  **chi phÃ­ lÆ°u trá»¯ EBS** (vÃ¬ RAM dump sáº½ lÃ m volume lá»›n hÆ¡n).

---

DÆ°á»›i Ä‘Ã¢y lÃ  báº£ng so sÃ¡nh vÃ  sÆ¡ Ä‘á»“ hoáº¡t Ä‘á»™ng cá»§a **EC2 Hibernate** Ä‘Æ°á»£c trÃ¬nh bÃ y báº±ng **Markdown**, báº¡n cÃ³ thá»ƒ dÃ¹ng trong tÃ i liá»‡u há»c hoáº·c ghi chÃº cÃ¡ nhÃ¢n:

---

## âœ… So sÃ¡nh cÃ¡c tráº¡ng thÃ¡i EC2 (Stop, Terminate, Hibernate)

```markdown
| Thuá»™c tÃ­nh                    | Stop                 | Terminate            | Hibernate                |
|------------------------------|----------------------|----------------------|--------------------------|
| RAM                          | âŒ Máº¥t khi dá»«ng       | âŒ Máº¥t hoÃ n toÃ n      | âœ… LÆ°u láº¡i (dump vÃ o EBS)|
| EBS Root Volume              | âœ… Giá»¯ láº¡i            | ğŸ” CÃ³ thá»ƒ máº¥t         | âœ… Giá»¯ láº¡i               |
| Tá»‘c Ä‘á»™ khá»Ÿi Ä‘á»™ng láº¡i         | ğŸ¢ Cháº­m (boot láº¡i tá»« Ä‘áº§u) | ğŸš« KhÃ´ng thá»ƒ khá»Ÿi Ä‘á»™ng láº¡i | âš¡ Nhanh (khÃ´ng boot láº¡i) |
| Khá»Ÿi Ä‘á»™ng OS + user data     | âœ… CÃ³                 | ğŸš« KhÃ´ng              | âŒ KhÃ´ng                 |
| Tráº¡ng thÃ¡i á»©ng dá»¥ng giá»¯ nguyÃªn | âŒ KhÃ´ng             | ğŸš« KhÃ´ng              | âœ… CÃ³                    |
| Chi phÃ­ lÆ°u trá»¯              | ğŸ’µ EBS váº«n tÃ­nh phÃ­   | ğŸ’µ Tuá»³ EBS giá»¯ láº¡i    | ğŸ’µ EBS + RAM dump        |
| Thá»i gian giá»¯ tráº¡ng thÃ¡i RAM | ğŸš« KhÃ´ng Ã¡p dá»¥ng      | ğŸš« KhÃ´ng Ã¡p dá»¥ng      | â±ï¸ Tá»‘i Ä‘a 60 ngÃ y         |
```

---

## ğŸ” SÆ¡ Ä‘á»“ hoáº¡t Ä‘á»™ng Hibernate

```markdown
1. EC2 Instance Ä‘ang cháº¡y
    ğŸ”¹ RAM: cÃ³ dá»¯ liá»‡u
    ğŸ”¹ á»” EBS: hoáº¡t Ä‘á»™ng

2. NgÆ°á»i dÃ¹ng chá»n "Hibernate"
    â¬ RAM Ä‘Æ°á»£c ghi xuá»‘ng EBS (RAM dump)

3. Instance chuyá»ƒn vá» tráº¡ng thÃ¡i "stopped"
    â— RAM váº­t lÃ½ bá»‹ máº¥t
    ğŸ“¦ RAM dump váº«n náº±m trÃªn EBS

4. Khi start láº¡i EC2
    â« RAM Ä‘Æ°á»£c náº¡p láº¡i tá»« EBS
    âœ… á»¨ng dá»¥ng trá»Ÿ láº¡i tráº¡ng thÃ¡i nhÆ° chÆ°a tá»«ng dá»«ng

ğŸ“Œ Ghi nhá»›:
- EBS Root Volume pháº£i Ä‘Æ°á»£c **mÃ£ hÃ³a**
- Dung lÆ°á»£ng EBS Ä‘á»§ Ä‘á»ƒ chá»©a toÃ n bá»™ RAM
- KhÃ´ng há»— trá»£ bare metal
```

---

## ğŸ“š Use Cases gá»£i Ã½

```markdown
- á»¨ng dá»¥ng cáº§n "resume" nhanh tráº¡ng thÃ¡i cÅ© mÃ  khÃ´ng pháº£i boot láº¡i tá»« Ä‘áº§u
- Há»‡ thá»‘ng cÃ³ khá»Ÿi Ä‘á»™ng cháº­m (cache warm-up, config náº·ng)
- Dev/Test cáº§n báº£o toÃ n session debug
- á»¨ng dá»¥ng ná»n táº£ng dá»¯ liá»‡u lá»›n (data science), batch job dá»«ng táº¡m thá»i
```

---

# 87. Auto Scaling Groups - Scaling Policies

### âœ… **CÃ¡c chÃ­nh sÃ¡ch scaling trong Auto Scaling Group**

1. ### **Dynamic Scaling** (Tá»± Ä‘á»™ng Ä‘iá»u chá»‰nh)

   * Gá»“m cÃ³:

     * **Target Tracking Scaling**:

       * ÄÆ¡n giáº£n nháº¥t.
       * Báº¡n Ä‘á»‹nh nghÄ©a má»™t **metric** (chá»‰ sá»‘) nhÆ° `CPU utilization`, vÃ  má»™t **target** (má»¥c tiÃªu) nhÆ° `40%`.
       * ASG sáº½ tá»± Ä‘á»™ng **scale out/in** Ä‘á»ƒ giá»¯ chá»‰ sá»‘ Ä‘Ã³ gáº§n giÃ¡ trá»‹ má»¥c tiÃªu.
     * **Simple or Step Scaling**:

       * Dá»±a vÃ o **CloudWatch alarms**.
       * Khi cÃ¡c cáº£nh bÃ¡o Ä‘Æ°á»£c kÃ­ch hoáº¡t, báº¡n cÃ³ thá»ƒ thÃªm hoáº·c bá»›t sá»‘ lÆ°á»£ng instance.

2. ### **Scheduled Scaling** (Láº­p lá»‹ch trÆ°á»›c)

   * Báº¡n cÃ³ thá»ƒ lÃªn lá»‹ch scale dá»±a theo **mÃ´ hÃ¬nh sá»­ dá»¥ng Ä‘Ã£ biáº¿t**.
   * VÃ­ dá»¥: má»—i thá»© SÃ¡u lÃºc 17h cÃ³ nhiá»u ngÆ°á»i dÃ¹ng â†’ tÄƒng **minimum capacity** lÃªn 10.

3. ### **Predictive Scaling** (Dá»± Ä‘oÃ¡n)

   * Dá»± Ä‘oÃ¡n trÆ°á»›c **táº£i há»‡ thá»‘ng** dá»±a vÃ o **lá»‹ch sá»­**.
   * ASG sáº½:

     * PhÃ¢n tÃ­ch dá»¯ liá»‡u lá»‹ch sá»­.
     * Dá»± Ä‘oÃ¡n táº£i tÆ°Æ¡ng lai.
     * Tá»± Ä‘á»™ng **lÃªn lá»‹ch scale** trÆ°á»›c thá»i Ä‘iá»ƒm táº£i tÄƒng.

---

### ğŸ” **CÃ¡c chá»‰ sá»‘ (metrics) tá»‘t Ä‘á»ƒ scale**

* **CPU Utilization**:

  * Phá»• biáº¿n nháº¥t.
  * Khi trung bÃ¬nh CPU cao â†’ cáº§n scale.

* **RequestCountPerTarget** (trÃªn ALB):

  * Phá»¥ thuá»™c á»©ng dá»¥ng.
  * VÃ­ dá»¥: Má»—i EC2 instance nÃªn xá»­ lÃ½ tá»‘i Ä‘a 1.000 request â†’ scale náº¿u vÆ°á»£t quÃ¡.

* **Network In/Out**:

  * Náº¿u á»©ng dá»¥ng táº£i lÃªn/táº£i xuá»‘ng nhiá»u dá»¯ liá»‡u.
  * Scale khi lÆ°u lÆ°á»£ng máº¡ng Ä‘áº¡t ngÆ°á»¡ng.

* **Custom Metrics**:

  * Do báº¡n Ä‘á»‹nh nghÄ©a.
  * Push lÃªn **CloudWatch** vÃ  thiáº¿t láº­p policy dá»±a vÃ o chÃºng.

---

### ğŸ” **Scaling Cooldown**

* **Cooldown**: Khoáº£ng thá»i gian **nghá»‰ giá»¯a cÃ¡c láº§n scale** (máº·c Ä‘á»‹nh 300s).
* Má»¥c Ä‘Ã­ch:

  * Cho há»‡ thá»‘ng **á»•n Ä‘á»‹nh láº¡i**.
  * TrÃ¡nh scale quÃ¡ nhiá»u láº§n liÃªn tá»¥c.
* NguyÃªn táº¯c:

  * Náº¿u Ä‘ang trong cooldown â†’ **bá» qua** yÃªu cáº§u scale má»›i.
  * Náº¿u khÃ´ng â†’ thá»±c hiá»‡n **scale**.
* Khuyáº¿n nghá»‹:

  * DÃ¹ng **ready-to-use AMI** Ä‘á»ƒ giáº£m thá»i gian khá»Ÿi táº¡o EC2 instance.
  * GiÃºp **rÃºt ngáº¯n cooldown** vÃ  scale linh hoáº¡t hÆ¡n.

---

### ğŸ“ˆ **GiÃ¡m sÃ¡t chi tiáº¿t (Detailed Monitoring)**

* Báº­t **detailed monitoring** giÃºp nháº­n Ä‘Æ°á»£c metric má»—i **1 phÃºt**.
* Ráº¥t quan trá»ng Ä‘á»ƒ **scale nhanh vÃ  chÃ­nh xÃ¡c** hÆ¡n.

---

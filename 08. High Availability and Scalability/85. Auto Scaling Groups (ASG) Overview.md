# 85. Auto Scaling Groups (ASG) Overview

## âš™ï¸ **Auto Scaling Group (ASG) â€“ Tá»± Ä‘á»™ng má»Ÿ rá»™ng háº¡ táº§ng EC2 trÃªn AWS**

---

### ğŸ“Œ **Auto Scaling Group lÃ  gÃ¬?**

* **Auto Scaling Group (ASG)** lÃ  má»™t dá»‹ch vá»¥ giÃºp **tá»± Ä‘á»™ng thÃªm (scale out)** hoáº·c **giáº£m (scale in)** sá»‘ lÆ°á»£ng **EC2 instances** Ä‘á»ƒ **phÃ¹ há»£p vá»›i táº£i thá»±c táº¿** cá»§a á»©ng dá»¥ng.
* DÃ¹ng Ä‘á»ƒ xá»­ lÃ½ cÃ¡c tÃ¬nh huá»‘ng mÃ  **táº£i tÄƒng hoáº·c giáº£m theo thá»i gian**, vÃ­ dá»¥ nhÆ° nhiá»u ngÆ°á»i dÃ¹ng truy cáº­p vÃ o website vÃ o giá» cao Ä‘iá»ƒm.

---

### ğŸ§  **Lá»£i Ã­ch cá»§a ASG:**

* **TÄƒng EC2 instance (scale out)** khi cÃ³ **nhiá»u táº£i**
* **Giáº£m EC2 instance (scale in)** khi táº£i **giáº£m Ä‘i**
* Giá»¯ á»•n Ä‘á»‹nh hoáº¡t Ä‘á»™ng vá»›i **min size** vÃ  **max size** Ä‘Æ°á»£c cáº¥u hÃ¬nh trÆ°á»›c

---

### ğŸ”„ **Tá»± Ä‘á»™ng thay tháº¿ instance bá»‹ lá»—i:**

* Náº¿u má»™t **EC2 instance** bá»‹ Ä‘Ã¡nh dáº¥u lÃ  **unhealthy**, **ASG sáº½ tá»± Ä‘á»™ng terminate vÃ  khá»Ÿi táº¡o má»™t instance má»›i thay tháº¿**.
* Khi káº¿t há»£p vá»›i **Load Balancer (ELB)**, cÃ¡c instance sáº½ tá»± Ä‘á»™ng Ä‘Æ°á»£c **Ä‘Äƒng kÃ½ vÃ o ELB** vÃ  sáºµn sÃ ng nháº­n traffic.

---

### ğŸ“Š **CÃ¡ch hoáº¡t Ä‘á»™ng cá»§a ASG:**

* Báº¡n cáº¥u hÃ¬nh 3 giÃ¡ trá»‹ chÃ­nh:

  * **Minimum capacity** (vÃ­ dá»¥: 2 instance)
  * **Desired capacity** (vÃ­ dá»¥: 4 instance)
  * **Maximum capacity** (vÃ­ dá»¥: 7 instance)

* ASG sáº½ tá»± Ä‘á»™ng **scale in/out** trong khoáº£ng tá»« min Ä‘áº¿n max capacity theo nhu cáº§u.

---

### ğŸŒ **TÃ­ch há»£p vá»›i Load Balancer (ELB):**

* Khi EC2 instances trong ASG Ä‘Æ°á»£c táº¡o ra, chÃºng **tá»± Ä‘á»™ng Ä‘Äƒng kÃ½ vá»›i ELB**.
* **ELB** sáº½ phÃ¢n phá»‘i **traffic Ä‘áº¿n cÃ¡c instance** vÃ  thá»±c hiá»‡n **health check**.
* Náº¿u **ELB phÃ¡t hiá»‡n má»™t instance unhealthy**, **ASG sáº½ thay tháº¿ nÃ³** â€“ Ä‘áº£m báº£o há»‡ thá»‘ng luÃ´n sáºµn sÃ ng phá»¥c vá»¥.

---

### âš™ï¸ **Launch Template (Máº«u khá»Ÿi cháº¡y EC2):**

* Äá»ƒ táº¡o ASG, báº¡n cáº§n cáº¥u hÃ¬nh **Launch Template** (thay tháº¿ cho **Launch Configuration** â€“ Ä‘Ã£ lá»—i thá»i).
* **Launch Template** chá»©a cÃ¡c thÃ´ng tin cáº§n thiáº¿t Ä‘á»ƒ khá»Ÿi táº¡o EC2:

  * **AMI**, **instance type**
  * **User data**, **EBS volumes**
  * **Security groups**, **SSH key pair**
  * **IAM role**, **network/subnet**, **load balancer**
  * â€¦vÃ  cÃ¡c thÃ´ng tin khÃ¡c tÆ°Æ¡ng tá»± khi báº¡n táº¡o EC2 thá»§ cÃ´ng.

---

### ğŸ“ˆ **Tá»± Ä‘á»™ng scale dá»±a vÃ o CloudWatch alarm:**

* **ASG** cÃ³ thá»ƒ tÃ­ch há»£p vá»›i **CloudWatch alarm** Ä‘á»ƒ tá»± Ä‘á»™ng scale.

* **CloudWatch alarm** sáº½ giÃ¡m sÃ¡t cÃ¡c **metric**, vÃ­ dá»¥ nhÆ° **average CPU usage** cá»§a cáº£ nhÃ³m EC2.

* Khi má»™t ngÆ°á»¡ng Ä‘Æ°á»£c vÆ°á»£t quÃ¡, alarm sáº½ kÃ­ch hoáº¡t má»™t **scaling policy**:

  * **Scale out**: TÄƒng sá»‘ lÆ°á»£ng EC2 instance
  * **Scale in**: Giáº£m sá»‘ lÆ°á»£ng EC2 instance

* ÄÃ¢y chÃ­nh lÃ  lÃ½ do **Auto Scaling Group cÃ³ tÃ­nh nÄƒng "auto"** â€“ hoáº¡t Ä‘á»™ng tá»± Ä‘á»™ng dá»±a trÃªn cáº£nh bÃ¡o.

---

### âœ… **TÃ³m táº¯t:**

* **Auto Scaling Group** lÃ  cÃ´ng cá»¥ máº¡nh máº½ giÃºp á»©ng dá»¥ng **linh hoáº¡t theo táº£i ngÆ°á»i dÃ¹ng**, **giáº£m chi phÃ­**, **tÄƒng Ä‘á»™ sáºµn sÃ ng**.
* Káº¿t há»£p vá»›i **Load Balancer** vÃ  **CloudWatch alarms**, ASG giÃºp táº¡o ra má»™t **háº¡ táº§ng tá»± Ä‘á»™ng, Ä‘Ã¡ng tin cáº­y vÃ  tiáº¿t kiá»‡m chi phÃ­**.

---


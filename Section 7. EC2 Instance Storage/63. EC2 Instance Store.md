# 63. EC2 Instance Store

## ğŸ’½ EC2 Instance Store â€“ á»” cá»©ng váº­t lÃ½ hiá»‡u nÄƒng cao cho EC2

### 1. **So sÃ¡nh vá»›i Network Drive (EBS)**

* TrÆ°á»›c Ä‘Ã¢y chÃºng ta Ä‘Ã£ gáº¯n á»• Ä‘Ä©a máº¡ng (**EBS volume**) vÃ o EC2 Instance.
* EBS cÃ³ hiá»‡u nÄƒng tá»‘t, **nhÆ°ng Ä‘Ã´i khi cáº§n hiá»‡u nÄƒng cÃ²n cao hÆ¡n**.
* Khi Ä‘Ã³, ta dÃ¹ng loáº¡i á»• cá»©ng váº­t lÃ½ Ä‘Æ°á»£c gá»i lÃ  **EC2 Instance Store**.

---

### 2. **EC2 Instance Store lÃ  gÃ¬?**

* EC2 Instance lÃ  **mÃ¡y áº£o**, nhÆ°ng nÃ³ váº«n Ä‘Æ°á»£c cháº¡y trÃªn **pháº§n cá»©ng tháº­t**.
* **Instance Store** lÃ  **á»• cá»©ng váº­t lÃ½ Ä‘Æ°á»£c gáº¯n trá»±c tiáº¿p vÃ o mÃ¡y chá»§ tháº­t** nÆ¡i EC2 Ä‘ang cháº¡y.
* ÄÃ¢y lÃ  á»• Ä‘Ä©a hiá»‡u suáº¥t cao dÃ¹ng Ä‘á»ƒ **Ä‘á»c/ghi dá»¯ liá»‡u cá»±c nhanh**:

  * DÃ¹ng cho **I/O-intensive workloads**.
  * CÃ³ **throughput cao** hÆ¡n nhiá»u so vá»›i EBS.

---

### 3. âš ï¸ **NhÆ°á»£c Ä‘iá»ƒm lá»›n â€“ Máº¥t dá»¯ liá»‡u khi stop/terminate**

* **EC2 Instance Store lÃ  ephemeral storage** (bá»™ nhá»› táº¡m).
* Khi báº¡n **dá»«ng (stop)** hoáº·c **xÃ³a (terminate)** EC2 Instance:

  * â¡ï¸ **ToÃ n bá»™ dá»¯ liá»‡u trÃªn Instance Store sáº½ máº¥t**.
* VÃ¬ váº­y, **khÃ´ng nÃªn dÃ¹ng Instance Store cho lÆ°u trá»¯ lÃ¢u dÃ i**.

---

### 4. âœ… **Use Case phÃ¹ há»£p cho Instance Store**

* **Cache**, **buffer**, **dá»¯ liá»‡u táº¡m thá»i**, **scratch space**.
* Nhá»¯ng dá»¯ liá»‡u khÃ´ng quan trá»ng hoáº·c cÃ³ thá»ƒ tÃ¡i táº¡o láº¡i nhanh chÃ³ng.
* â¡ï¸ Náº¿u cáº§n lÆ°u trá»¯ lÃ¢u dÃ i, nÃªn dÃ¹ng **EBS** hoáº·c dá»‹ch vá»¥ nhÆ° **S3**.

---

### 5. ğŸ›‘ **Rá»§i ro máº¥t dá»¯ liá»‡u khi pháº§n cá»©ng bá»‹ lá»—i**

* Náº¿u mÃ¡y chá»§ váº­t lÃ½ nÆ¡i EC2 Instance cháº¡y bá»‹ há»ng, thÃ¬ **Instance Store cÅ©ng sáº½ máº¥t luÃ´n**.
* Do Ä‘Ã³, náº¿u sá»­ dá»¥ng Instance Store:

  * â¡ï¸ **NgÆ°á»i dÃ¹ng pháº£i tá»± backup vÃ  replicate** dá»¯ liá»‡u náº¿u cáº§n thiáº¿t.

---

### 6. ğŸ“Š **Hiá»‡u nÄƒng thá»±c táº¿ â€“ IOPS cá»±c cao**

* VÃ­ dá»¥: **I3 Instance** cÃ³ Ä‘i kÃ¨m Instance Store.
* IOPS (Input/Output Operations Per Second):

  * CÃ³ thá»ƒ Ä‘áº¡t tá»›i **3.3 triá»‡u Read IOPS**, **1.4 triá»‡u Write IOPS**.
* So sÃ¡nh vá»›i EBS gp2: chá»‰ Ä‘áº¡t khoáº£ng **32,000 IOPS**.
* â¡ï¸ **Gáº¥p hÃ ng chá»¥c Ä‘áº¿n hÃ ng trÄƒm láº§n hiá»‡u nÄƒng EBS**.

---

### 7. ğŸ“Œ **Káº¿t luáº­n**

* Khi Ä‘á» bÃ i hoáº·c thá»±c táº¿ yÃªu cáº§u:

  * **Hiá»‡u suáº¥t I/O cá»±c cao**, **hardware attached volume** â¡ï¸ nghÄ© ngay Ä‘áº¿n **EC2 Instance Store**.
* NhÆ°ng nhá»› ráº±ng: **KhÃ´ng bá»n vá»¯ng, khÃ´ng dÃ¹ng cho dá»¯ liá»‡u lÃ¢u dÃ i**.

---

DÆ°á»›i Ä‘Ã¢y lÃ  **báº£ng so sÃ¡nh giá»¯a EBS vÃ  EC2 Instance Store** Ä‘á»ƒ báº¡n dá»… hÃ¬nh dung:

| âš™ï¸ **TiÃªu chÃ­**                             | **Amazon EBS (Elastic Block Store)**            | **EC2 Instance Store**                               |
| ------------------------------------------- | ----------------------------------------------- | ---------------------------------------------------- |
| ğŸ’¾ **Loáº¡i lÆ°u trá»¯**                         | á»” Ä‘Ä©a máº¡ng (network-attached storage)           | á»” Ä‘Ä©a váº­t lÃ½ (physically attached to host)           |
| ğŸ” **TÃ­nh bá»n vá»¯ng (Durability)**           | **CÃ³** â€“ Dá»¯ liá»‡u váº«n giá»¯ sau khi stop/terminate | **KhÃ´ng** â€“ Máº¥t dá»¯ liá»‡u khi stop/terminate instance  |
| ğŸ’¥ **Rá»§i ro máº¥t dá»¯ liá»‡u khi lá»—i pháº§n cá»©ng** | **Tháº¥p** â€“ Dá»¯ liá»‡u lÆ°u trá»¯ riÃªng biá»‡t trÃªn EBS  | **Cao** â€“ Náº¿u server váº­t lÃ½ lá»—i, máº¥t toÃ n bá»™ dá»¯ liá»‡u |
| ğŸš€ **Hiá»‡u nÄƒng (IOPS)**                     | Tá»‘t (tÃ¹y theo loáº¡i: gp2, gp3, io1...)           | **Ráº¥t cao** â€“ lÃªn Ä‘áº¿n hÃ ng triá»‡u IOPS                |
| ğŸ”„ **Kháº£ nÄƒng snapshot/backup**             | **Há»— trá»£ snapshot, backup dá»… dÃ ng**             | âŒ KhÃ´ng há»— trá»£ snapshot trá»±c tiáº¿p                    |
| ğŸ”Œ **Gáº¯n vÃ o Instance khÃ¡c**                | **CÃ³ thá»ƒ detach vÃ  attach láº¡i EC2 khÃ¡c**        | âŒ Gáº¯n cá»‘ Ä‘á»‹nh, khÃ´ng thá»ƒ di chuyá»ƒn                   |
| ğŸ“¥ **Sá»­ dá»¥ng chÃ­nh**                        | LÆ°u trá»¯ dá»¯ liá»‡u lÃ¢u dÃ i, á»©ng dá»¥ng á»•n Ä‘á»‹nh       | **Cache, buffer, temporary data, scratch space**     |
| ğŸ§© **Kháº£ nÄƒng tÃ¹y biáº¿n khi táº¡o AMI**        | CÃ³ thá»ƒ táº¡o AMI tá»« EBS Volume                    | KhÃ´ng thá»ƒ táº¡o AMI trá»±c tiáº¿p tá»« Instance Store        |
| ğŸ’¸ **Chi phÃ­**                              | Tráº£ phÃ­ theo GB vÃ  IOPS                         | ÄÃ£ bao gá»“m trong giÃ¡ cá»§a má»™t sá»‘ loáº¡i EC2 Instance    |

---

âœ… **TÃ³m láº¡i**:

* DÃ¹ng **EBS** cho: á»©ng dá»¥ng cáº§n lÆ°u trá»¯ lÃ¢u dÃ i, an toÃ n dá»¯ liá»‡u, dá»… snapshot.
* DÃ¹ng **Instance Store** cho: hiá»‡u nÄƒng cá»±c cao, dá»¯ liá»‡u táº¡m thá»i, khÃ´ng quan trá»ng.

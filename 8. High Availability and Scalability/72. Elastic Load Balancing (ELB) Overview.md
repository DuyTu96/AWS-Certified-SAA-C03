# 72. Elastic Load Balancing (ELB) Overview

## ğŸ”¸ Tá»•ng quan vá» Load Balancing trÃªn AWS

### âœ… **Load Balancer lÃ  gÃ¬?**
- Load Balancer (bá»™ cÃ¢n báº±ng táº£i) lÃ  má»™t **server hoáº·c táº­p há»£p server** giÃºp **phÃ¢n phá»‘i lÆ°u lÆ°á»£ng truy cáº­p** Ä‘áº¿n nhiá»u **EC2 instances (backend)**.
- NgÆ°á»i dÃ¹ng chá»‰ tháº¥y má»™t **Ä‘iá»ƒm truy cáº­p duy nháº¥t (endpoint)** â€“ lÃ  **Elastic Load Balancer**, cÃ²n viá»‡c phÃ¢n phá»‘i lÆ°u lÆ°á»£ng Ä‘áº¿n backend do Load Balancer xá»­ lÃ½.

---

### âœ… **LÃ½ do sá»­ dá»¥ng Load Balancer**
- **CÃ¢n báº±ng táº£i** giá»¯a nhiá»u backend Ä‘á»ƒ tá»‘i Æ°u hiá»‡u suáº¥t.
- **Xá»­ lÃ½ lá»—i (failure handling)** nhá» vÃ o cÆ¡ cháº¿ **health check** â€“ chá»‰ gá»­i traffic Ä‘áº¿n cÃ¡c instance hoáº¡t Ä‘á»™ng tá»‘t.
- **SSL Termination**: giáº£i mÃ£ traffic HTTPS táº¡i Load Balancer, giáº£m táº£i cho backend.
- **Sticky Sessions**: duy trÃ¬ session cá»‘ Ä‘á»‹nh qua cookies.
- **High Availability**: phÃ¢n phá»‘i lÆ°u lÆ°á»£ng qua nhiá»u **Availability Zones**.
- **TÃ¡ch biá»‡t traffic cÃ´ng khai vÃ  ná»™i bá»™** (public vs private).
- **TÃ­ch há»£p cháº·t cháº½ vá»›i cÃ¡c dá»‹ch vá»¥ AWS** nhÆ°:
  - **EC2**, **Auto Scaling Group**, **ECS**, **Certificate Manager**, **CloudWatch**, **Route 53**, **WAF**, **Global Accelerator**,...

---

### âœ… **Health Check lÃ  gÃ¬?**
- **Health check** dÃ¹ng Ä‘á»ƒ kiá»ƒm tra tÃ¬nh tráº¡ng cá»§a cÃ¡c **EC2 instance**.
- Náº¿u instance pháº£n há»“i khÃ´ng Ä‘áº¡t yÃªu cáº§u (vÃ­ dá»¥ khÃ´ng tráº£ vá» mÃ£ HTTP `200 OK` táº¡i Ä‘Æ°á»ng dáº«n `/health`), nÃ³ sáº½ bá»‹ Ä‘Ã¡nh dáº¥u lÃ  **unhealthy** vÃ  Load Balancer **ngÆ°ng gá»­i traffic** Ä‘áº¿n Ä‘Ã³.
- VÃ­ dá»¥:
  - Protocol: HTTP  
  - Port: 4567  
  - Path: `/health`

---

### âœ… **PhÃ¢n loáº¡i Elastic Load Balancer (ELB) trÃªn AWS**

| TÃªn viáº¿t táº¯t | Loáº¡i Load Balancer         | Giao thá»©c há»— trá»£                        | Ra máº¯t | KhuyÃªn dÃ¹ng |
|--------------|-----------------------------|------------------------------------------|--------|-------------|
| **CLB**       | Classic Load Balancer       | HTTP, HTTPS, TCP, SSL                   | 2009   | âŒ KhÃ´ng nÃªn dÃ¹ng (deprecated) |
| **ALB**       | Application Load Balancer   | HTTP, HTTPS, WebSocket                  | 2016   | âœ… |
| **NLB**       | Network Load Balancer       | TCP, TLS, UDP                           | 2017   | âœ… |
| **GWLB**      | Gateway Load Balancer       | IP layer, Layer 3                       | 2020   | âœ… |

> ğŸ”¹ **ALB** phÃ¹ há»£p cho á»©ng dá»¥ng Web Layer 7 (HTTP/HTTPS)  
> ğŸ”¹ **NLB** phÃ¹ há»£p vá»›i hiá»‡u suáº¥t cao, real-time, game server...  
> ğŸ”¹ **GWLB** dÃ¹ng cho thiáº¿t bá»‹ báº£o máº­t (firewall, IDS...)

---

### âœ… **Public vs Internal Load Balancer**
- **Public Load Balancer**: truy cáº­p tá»« internet â†’ dÃ¹ng cho website, app cÃ´ng khai.
- **Internal Load Balancer**: dÃ¹ng trong ná»™i bá»™ VPC â†’ cho microservices, backend.

---

### âœ… **Cáº¥u hÃ¬nh Security Group cho Load Balancer vÃ  EC2**

#### 1. **Security Group cá»§a Load Balancer**
- Cho phÃ©p káº¿t ná»‘i tá»« internet:
  - Port: `80` hoáº·c `443`
  - Source: `0.0.0.0/0` (toÃ n bá»™ internet)

#### 2. **Security Group cá»§a EC2**
- Chá»‰ cho phÃ©p traffic **tá»« Load Balancer**:
  - Port: `80`
  - Source: **Security Group cá»§a Load Balancer** (khÃ´ng dÃ¹ng IP)

> ğŸ” ÄÃ¢y lÃ  má»™t **biá»‡n phÃ¡p báº£o máº­t nÃ¢ng cao**, giÃºp EC2 chá»‰ nháº­n traffic Ä‘Ã¡ng tin cáº­y.

---

### âœ… Káº¿t luáº­n
- **Elastic Load Balancer** lÃ  cÃ´ng cá»¥ **thiáº¿t yáº¿u** cho kiáº¿n trÃºc web hiá»‡n Ä‘áº¡i trÃªn AWS.
- GiÃºp **phÃ¢n táº£i, tÄƒng tÃ­nh sáºµn sÃ ng, tÄƒng báº£o máº­t, vÃ  má»Ÿ rá»™ng há»‡ thá»‘ng** dá»… dÃ ng.
- AWS quáº£n lÃ½ hoÃ n toÃ n ELB, nÃªn báº¡n **khÃ´ng cáº§n tá»± triá»ƒn khai** vÃ  báº£o trÃ¬ nhÆ° khi dÃ¹ng cÃ¡c pháº§n má»m load balancer tá»± quáº£n lÃ½.

---

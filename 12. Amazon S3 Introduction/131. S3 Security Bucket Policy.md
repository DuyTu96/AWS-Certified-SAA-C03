## ğŸ” Amazon S3 â€“ Security

### 1. **User-Based Security**

* Báº£o máº­t dá»±a trÃªn **IAM policy**.
* Cho phÃ©p báº¡n kiá»ƒm soÃ¡t **API call** nÃ o Ä‘Æ°á»£c phÃ©p Ä‘á»‘i vá»›i **IAM user** cá»¥ thá»ƒ.
* ÄÆ°á»£c dÃ¹ng phá»• biáº¿n khi ngÆ°á»i dÃ¹ng náº±m **trong cÃ¹ng tÃ i khoáº£n AWS**.

---

### 2. **Resource-Based Security**

* Ãp dá»¥ng qua **S3 Bucket policy** â€“ Ä‘Ã¢y lÃ  cÃ¡ch phá»• biáº¿n nháº¥t hiá»‡n nay.
* ChÃ­nh sÃ¡ch Ã¡p dá»¥ng **trá»±c tiáº¿p lÃªn Bucket** (khÃ¡c vá»›i IAM policy Ã¡p dá»¥ng cho user).
* DÃ¹ng Ä‘á»ƒ:

  * **Cho phÃ©p user tá»« account khÃ¡c** (Cross-Account Access) truy cáº­p bucket.
  * **CÃ´ng khai bucket** (Public Access).
  * **Báº¯t buá»™c mÃ£ hÃ³a Ä‘á»‘i tÆ°á»£ng khi upload** (encryption enforcement).

---

### 3. **ACL â€“ Access Control List**

* CÃ³ **Object ACL** vÃ  **Bucket ACL** (Ã­t phá»• biáº¿n hÆ¡n).
* Cho phÃ©p Ä‘iá»u chá»‰nh chi tiáº¿t quyá»n truy cáº­p tá»«ng object hoáº·c bucket.
* **Hiá»‡n nay thÆ°á»ng bá»‹ disable** vÃ¬ khÃ´ng an toÃ n vÃ  khÃ³ quáº£n lÃ½.

---

### 4. **CÃ¡c Ä‘iá»u kiá»‡n Ä‘á»ƒ truy cáº­p Object trong S3**

IAM principal (ngÆ°á»i gá»i API) **Ä‘Æ°á»£c phÃ©p truy cáº­p** má»™t object khi:

* **IAM permissions** cho phÃ©p, **hoáº·c**
* **S3 Bucket Policy** cho phÃ©p,
* **vÃ  khÃ´ng cÃ³ "explicit deny"** nÃ o.

---

## ğŸ§¾ **Cáº¥u trÃºc cá»§a má»™t S3 Bucket Policy**

* Viáº¿t báº±ng **Ä‘á»‹nh dáº¡ng JSON**.
* Gá»“m cÃ¡c pháº§n chÃ­nh:

  * **Resource**: Äá»‘i tÆ°á»£ng chÃ­nh sÃ¡ch Ã¡p dá»¥ng (vÃ­ dá»¥: `arn:aws:s3:::example-bucket/*`).
  * **Effect**: `Allow` hoáº·c `Deny`.
  * **Action**: API Ä‘Æ°á»£c cho phÃ©p hoáº·c tá»« chá»‘i (vÃ­ dá»¥: `s3:GetObject`).
  * **Principal**: Äá»‘i tÆ°á»£ng Ã¡p dá»¥ng (vÃ­ dá»¥: `"*"` lÃ  táº¥t cáº£ má»i ngÆ°á»i).

### VÃ­ dá»¥:

```json
{
  "Effect": "Allow",
  "Principal": "*",
  "Action": "s3:GetObject",
  "Resource": "arn:aws:s3:::example-bucket/*"
}
```

ğŸ‘‰ ÄÃ¢y lÃ  má»™t **Bucket Policy cho phÃ©p cÃ´ng khai truy cáº­p (public read)** táº¥t cáº£ object trong bucket.

---

## ğŸ” CÃ¡c tÃ¬nh huá»‘ng thá»±c táº¿

### âœ… Truy cáº­p cÃ´ng khai (Public Access)

* GÃ¡n **Bucket Policy** cho phÃ©p `"Principal": "*"`.
* NgÆ°á»i dÃ¹ng trÃªn **Internet** (khÃ´ng cáº§n IAM) cÃ³ thá»ƒ truy cáº­p object qua URL.

### âœ… IAM User trong cÃ¹ng account

* GÃ¡n **IAM policy** cho user.
* Cho phÃ©p gá»i cÃ¡c API nhÆ° `s3:GetObject`, `s3:PutObject`, v.v.

### âœ… EC2 instance truy cáº­p S3

* **KhÃ´ng nÃªn dÃ¹ng IAM user**.
* Táº¡o **IAM Role** vÃ  gÃ¡n vÃ o **EC2 instance**.
* Role cÃ³ IAM permission Ä‘á»ƒ truy cáº­p S3.

### âœ… Cross-Account Access

* User á»Ÿ tÃ i khoáº£n AWS khÃ¡c muá»‘n truy cáº­p bucket cá»§a báº¡n.
* Cáº§n dÃ¹ng **Bucket Policy** cho phÃ©p `Principal` lÃ  ARN cá»§a user/role tá»« tÃ i khoáº£n kia.

---

## ğŸ›‘ Block Public Access (BPA)

* CÃ i Ä‘áº·t Ä‘á»ƒ **ngÄƒn truy cáº­p cÃ´ng khai** ngoÃ i Ã½ muá»‘n.
* CÃ³ thá»ƒ báº­t á»Ÿ:

  * **Bucket level**
  * **Account level** (Ã¡p dá»¥ng cho táº¥t cáº£ bucket)
* **Náº¿u báº­t**, dÃ¹ Bucket Policy cho phÃ©p public thÃ¬ **váº«n bá»‹ cháº·n**.

ğŸ‘‰ AWS dÃ¹ng tÃ­nh nÄƒng nÃ y Ä‘á»ƒ **chá»‘ng rÃ² rá»‰ dá»¯ liá»‡u** quan trá»ng cá»§a cÃ´ng ty.

---

## ğŸ”š Tá»•ng káº¿t

* S3 Security cÃ³ 4 cÆ¡ cháº¿ chÃ­nh: **IAM Policy**, **Bucket Policy**, **ACL**, vÃ  **Encryption**.
* **Bucket Policy** lÃ  cÃ¡ch phá»• biáº¿n nháº¥t hiá»‡n nay.
* **Block Public Access** lÃ  lá»›p báº£o máº­t cuá»‘i cÃ¹ng, nÃªn kiá»ƒm tra ká»¹ trÆ°á»›c khi báº­t cÃ´ng khai.
* Biáº¿t khi nÃ o dÃ¹ng IAM User, khi nÃ o dÃ¹ng IAM Role, vÃ  cÃ¡ch cáº¥u hÃ¬nh Cross-Account.

---

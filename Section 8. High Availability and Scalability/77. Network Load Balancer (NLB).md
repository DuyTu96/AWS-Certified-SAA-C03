# 77. Network Load Balancer (NLB)

## âš™ï¸ **Network Load Balancer (NLB)** â€“ Táº£i cao, Ä‘á»™ trá»… cá»±c tháº¥p, há»— trá»£ TCP/UDP

### ğŸ§  Tá»•ng quan:

* **Network Load Balancer (NLB)** hoáº¡t Ä‘á»™ng á»Ÿ **layer 4**, há»— trá»£ **TCP** vÃ  **UDP** traffic.
* So vá»›i **Application Load Balancer (ALB)** á»Ÿ **layer 7** (HTTP), NLB xá»­ lÃ½ cÃ¡c táº§ng tháº¥p hÆ¡n (gáº§n vá»›i transport layer hÆ¡n).

---

### ğŸš€ Äáº·c Ä‘iá»ƒm ná»•i báº­t:

* **Hiá»‡u suáº¥t cá»±c cao**: xá»­ lÃ½ **hÃ ng triá»‡u request má»—i giÃ¢y**, **Ä‘á»™ trá»… ráº¥t tháº¥p (ultra-low latency)**.
* **IP tÄ©nh (Static IP)**:

  * Má»—i **Availability Zone** chá»‰ cÃ³ **má»™t Ä‘á»‹a chá»‰ IP tÄ©nh**.
  * CÃ³ thá»ƒ gÃ¡n **Elastic IP** cho tá»«ng AZ.
  * PhÃ¹ há»£p khi á»©ng dá»¥ng cáº§n Ä‘Æ°á»£c truy cáº­p qua **1â€“3 IP cá»‘ Ä‘á»‹nh**.

ğŸ“Œ **Ghi nhá»› cho ká»³ thi**: Náº¿u Ä‘á» bÃ i yÃªu cáº§u xá»­ lÃ½ **TCP**, **UDP**, hoáº·c cáº§n dÃ¹ng **Static IP**, hÃ£y **nghÄ© Ä‘áº¿n Network Load Balancer**.

---

### ğŸ’µ **LÆ°u Ã½ chi phÃ­**:

* **KhÃ´ng náº±m trong AWS Free Tier**, sá»­ dá»¥ng sáº½ bá»‹ tÃ­nh phÃ­.

---

### ğŸ§© Cáº¥u hÃ¬nh & Hoáº¡t Ä‘á»™ng:

1. **TÆ°Æ¡ng tá»± ALB**:

   * Táº¡o **Target Group**.
   * GÃ¡n cho NLB â†’ Ä‘á»‹nh tuyáº¿n traffic Ä‘áº¿n target.

2. **Target Group cÃ³ thá»ƒ lÃ **:

   * **EC2 instance**: NLB gá»­i **TCP/UDP** traffic trá»±c tiáº¿p Ä‘áº¿n.
   * **IP addresses**: pháº£i lÃ  **Private IP**, cÃ³ thá»ƒ lÃ :

     * Private IP cá»§a EC2 instance.
     * Private IP cá»§a mÃ¡y chá»§ trong **data center riÃªng** â†’ Há»— trá»£ **hybrid environment**.

3. **NLB phÃ­a trÆ°á»›c ALB** (chá»“ng load balancer):

   * NLB xá»­ lÃ½ IP cá»‘ Ä‘á»‹nh & TCP.
   * ALB xá»­ lÃ½ routing logic theo HTTP.

ğŸ“Œ **á»¨ng dá»¥ng nÃ¢ng cao**: dÃ¹ng **NLB trÆ°á»›c ALB** Ä‘á»ƒ vá»«a cÃ³ **fixed IP** vá»«a cÃ³ **HTTP rule routing**.

---

### â¤ï¸ Health Check (kiá»ƒm tra tÃ¬nh tráº¡ng):

* **Network Load Balancer** há»— trá»£ 3 loáº¡i protocol Ä‘á»ƒ kiá»ƒm tra:

  * **TCP**
  * **HTTP**
  * **HTTPS**

â†’ Náº¿u á»©ng dá»¥ng backend há»— trá»£ HTTP/HTTPS, báº¡n **cÃ³ thá»ƒ dÃ¹ng health check á»Ÿ má»©c application**.

---

## âœ… Tá»•ng káº¿t:

| TiÃªu chÃ­                 | Network Load Balancer                |
| ------------------------ | ------------------------------------ |
| Layer hoáº¡t Ä‘á»™ng          | Layer 4                              |
| Giao thá»©c há»— trá»£         | TCP, UDP                             |
| Hiá»‡u suáº¥t                | Ráº¥t cao, Ä‘á»™ trá»… cá»±c tháº¥p             |
| IP                       | Há»— trá»£ **Static IP**, **Elastic IP** |
| Target                   | EC2 instance, Private IP             |
| Health Check             | TCP, HTTP, HTTPS                     |
| DÃ¹ng káº¿t há»£p vá»›i ALB?    | âœ… CÃ³ thá»ƒ                             |
| Náº±m trong AWS Free Tier? | âŒ KhÃ´ng                              |

---


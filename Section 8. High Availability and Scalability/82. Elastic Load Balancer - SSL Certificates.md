# 82. Elastic Load Balancer - SSL Certificates

## ğŸ” **SSL vÃ  TLS Certificates trong AWS**

---

### ğŸ§© **SSL / TLS lÃ  gÃ¬?**

* **SSL (Secure Sockets Layer)** vÃ  **TLS (Transport Layer Security)** lÃ  **giao thá»©c mÃ£ hÃ³a** giÃºp báº£o vá»‡ **dá»¯ liá»‡u Ä‘ang truyá»n** giá»¯a **client** vÃ  **load balancer**.
* Viá»‡c mÃ£ hÃ³a nÃ y gá»i lÃ  **in-flight encryption** (mÃ£ hÃ³a trong quÃ¡ trÃ¬nh truyá»n).
* Máº·c dÃ¹ **TLS** lÃ  phiÃªn báº£n má»›i hÆ¡n vÃ  Ä‘Æ°á»£c sá»­ dá»¥ng phá»• biáº¿n hiá»‡n nay, ngÆ°á»i ta váº«n thÆ°á»ng gá»i chung lÃ  **SSL certificates** cho dá»… hiá»ƒu.

---

### ğŸ“œ **Chá»©ng chá»‰ SSL cÃ´ng khai**

* ÄÆ°á»£c cáº¥p bá»Ÿi cÃ¡c **Certificate Authority (CA)** nhÆ°: Comodo, Symantec, GoDaddy, GlobalSign, Digicert, Let's Encrypt...
* **ÄÆ°á»£c gáº¯n vÃ o Load Balancer** Ä‘á»ƒ mÃ£ hÃ³a káº¿t ná»‘i giá»¯a client vÃ  load balancer.
* VÃ­ dá»¥: khi truy cáº­p má»™t trang web cÃ³ **biá»ƒu tÆ°á»£ng khÃ³a xanh** ğŸ”’ â†’ káº¿t ná»‘i Ä‘ang Ä‘Æ°á»£c mÃ£ hÃ³a báº±ng SSL.

---

### â° **Thá»i háº¡n cá»§a chá»©ng chá»‰ SSL**

* SSL Certificates cÃ³ **ngÃ y háº¿t háº¡n**, pháº£i **gia háº¡n Ä‘á»‹nh ká»³** Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh há»£p lá»‡ vÃ  báº£o máº­t.

---

### âš™ï¸ **Hoáº¡t Ä‘á»™ng vá»›i Load Balancer nhÆ° tháº¿ nÃ o?**

1. **Client** káº¿t ná»‘i tá»›i Load Balancer qua **HTTPS** (mÃ£ hÃ³a).
2. Load Balancer thá»±c hiá»‡n **SSL Termination** â€“ cháº¥m dá»©t mÃ£ hÃ³a táº¡i Ä‘Ã¢y.
3. Sau Ä‘Ã³, Load Balancer cÃ³ thá»ƒ káº¿t ná»‘i tá»›i **EC2 instances** báº±ng **HTTP** (khÃ´ng mÃ£ hÃ³a), nhÆ°ng Ä‘i trong **VPC** nÃªn váº«n an toÃ n.
4. Load Balancer sá»­ dá»¥ng chá»©ng chá»‰ **X.509** (SSL/TLS Certificate).
5. CÃ¡c chá»©ng chá»‰ SSL Ä‘Æ°á»£c quáº£n lÃ½ thÃ´ng qua **AWS Certificate Manager (ACM)**.

   * CÃ³ thá»ƒ tá»± táº¡o hoáº·c **upload** chá»©ng chá»‰ cá»§a riÃªng báº¡n.

---

### ğŸŒ **SNI (Server Name Indication) lÃ  gÃ¬?**

* **SNI** cho phÃ©p client **chá»‰ Ä‘á»‹nh hostname** muá»‘n truy cáº­p **ngay trong quÃ¡ trÃ¬nh báº¯t tay SSL ban Ä‘áº§u**.
* Dá»±a vÃ o hostname Ä‘Ã³, Load Balancer biáº¿t **nÃªn dÃ¹ng SSL certificate nÃ o** trong sá»‘ nhiá»u cÃ¡i Ä‘ang cÃ³.
* Cho phÃ©p:

  * Má»™t Load Balancer phá»¥c vá»¥ **nhiá»u website** vá»›i **nhiá»u chá»©ng chá»‰ SSL khÃ¡c nhau**.
  * Ãp dá»¥ng khi dÃ¹ng **ALB, NLB** hoáº·c **CloudFront**.
  * **KhÃ´ng hoáº¡t Ä‘á»™ng vá»›i Classic Load Balancer**.

---

### ğŸ—‚ï¸ **VÃ­ dá»¥ vá» SNI vá»›i ALB:**

* **ALB** cÃ³ 2 **Target Group**:

  * `www.mycorp.com`
  * `domain1.example.com`
* ALB Ä‘Æ°á»£c cáº¥u hÃ¬nh 2 **SSL Certificates** tÆ°Æ¡ng á»©ng vá»›i 2 domain nÃ y.
* Khi client gá»­i yÃªu cáº§u Ä‘áº¿n `www.mycorp.com`:

  * **ALB** nháº­n SNI â†’ chá»n Ä‘Ãºng **SSL certificate** tÆ°Æ¡ng á»©ng.
  * MÃ£ hÃ³a vÃ  Ä‘á»‹nh tuyáº¿n vá» Ä‘Ãºng **Target Group** tÆ°Æ¡ng á»©ng.

---

### ğŸ“Œ **So sÃ¡nh há»— trá»£ SSL theo loáº¡i Load Balancer:**

| Load Balancer Type        | Há»— trá»£ SSL Certificate | Sá»‘ lÆ°á»£ng SSL Certificate | SNI há»— trá»£ |
| ------------------------- | ---------------------- | ------------------------ | ---------- |
| **Classic Load Balancer** | âœ… CÃ³                   | âŒ Chá»‰ 1                  | âŒ KhÃ´ng    |
| **Application LB (ALB)**  | âœ… CÃ³                   | âœ… Nhiá»u SSL certs        | âœ… CÃ³       |
| **Network LB (NLB)**      | âœ… CÃ³                   | âœ… Nhiá»u SSL certs        | âœ… CÃ³       |

ğŸ‘‰ Vá»›i **CLB**, náº¿u muá»‘n dÃ¹ng nhiá»u SSL certs â†’ pháº£i táº¡o nhiá»u Load Balancer riÃªng biá»‡t.

---

### âœ… **TÃ³m táº¯t Ã½ chÃ­nh:**

* **TLS** lÃ  phiÃªn báº£n má»›i hÆ¡n cá»§a **SSL**, nhÆ°ng má»i ngÆ°á»i váº«n thÆ°á»ng gá»i lÃ  SSL.
* SSL Certificate giÃºp **mÃ£ hÃ³a lÆ°u lÆ°á»£ng giá»¯a client vÃ  load balancer**.
* Sá»­ dá»¥ng **ACM** Ä‘á»ƒ quáº£n lÃ½ chá»©ng chá»‰.
* **SNI** lÃ  cÃ´ng nghá»‡ quan trá»ng cho phÃ©p má»™t Load Balancer dÃ¹ng nhiá»u SSL certs.
* **ALB vÃ  NLB** há»— trá»£ SNI vÃ  nhiá»u chá»©ng chá»‰.
* **CLB** thÃ¬ khÃ´ng há»— trá»£ SNI vÃ  chá»‰ dÃ¹ng Ä‘Æ°á»£c 1 SSL cert.

---


## 🎯 **Demo cấu hình S3 Event Notifications**

### 🪣 **Tạo S3 Bucket**

* Tạo bucket tên: **stephane-v3-events-notifications**.
* Chọn khu vực (ví dụ: Ireland), và tạo bucket.

---

## ⚙️ **Cấu hình Event Notifications**

1. Vào bucket → chọn tab **Properties**.
2. Kéo xuống phần **Event Notifications**.

Tại đây có **2 tùy chọn**:

* **Tạo Event Notification** gửi đến SNS, SQS, Lambda.
* **Bật Amazon EventBridge** để gửi **toàn bộ sự kiện** của bucket vào EventBridge.

---

## 🛠️ **Tạo Event Notification gửi đến SQS**

* Tạo event tên: **DemoEventNotification**.
* **Chọn loại sự kiện**: chọn **All object create events** (sự kiện tạo đối tượng).
* **Không dùng prefix/suffix** (để đơn giản).
* **Chọn đích (destination)**: SQS queue.

---

## 📬 **Tạo SQS Queue**

* Tạo queue tên: **DemoS3Notification**.
* Sau đó, cập nhật **Access Policy** của queue để cho phép **S3 gửi message**.

### 🔐 Cấu hình Access Policy:

* Dùng **Policy Generator** để tạo chính sách cho phép **SendMessage** từ **anyone** đến queue ARN.
* Gắn policy mới vào queue.
* Quay lại S3, chọn lại queue → **Lưu thành công**.

---

## 🧪 **Kiểm tra hoạt động**

* **Upload file**: ví dụ `coffee.jpeg` vào bucket.
* Vào SQS queue → **Poll for messages**.
* Xem nội dung message:

  * `"eventName": "ObjectCreated:Put"`
  * `"key": "coffee.jpeg"`
* Điều này chứng minh rằng:

  * **S3 đã gửi sự kiện thành công đến SQS**.
  * Có thể dùng sự kiện này để **tự động xử lý**, ví dụ **tạo thumbnail** từ ảnh.

---

## 📝 **Ghi nhớ**

* **S3 Event Notifications** có thể gửi tới:

  * **SQS**
  * **SNS**
  * **Lambda**
  * **Amazon EventBridge** (để xử lý mở rộng)
* Khi gửi tới SQS/SNS/Lambda:

  * Cần có **Resource Access Policy** tương ứng để cấp quyền cho S3.

---

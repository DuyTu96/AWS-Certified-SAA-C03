## 📢 **Amazon S3 Event Notifications**

### ✅ **S3 Event là gì?**

* **Event (sự kiện)** là những hành động xảy ra trong Amazon S3 như:

  * **Object Created** (tạo đối tượng)
  * **Object Removed** (xóa đối tượng)
  * **Object Restored** (khôi phục đối tượng)
  * **Replication** (sao chép)

### ✅ **Mục đích sử dụng**

* **Tự động phản ứng** khi có sự kiện xảy ra trong S3.
* Ví dụ: Khi một ảnh được upload lên S3 → **Tự động tạo ảnh thumbnail**.

---

## 🧭 **Event có thể được gửi đến các đích (destination):**

1. **SNS Topic**
2. **SQS Queue**
3. **Lambda Function**
4. **Amazon EventBridge**

---

## 📂 **Lọc (Filter) S3 Event**

* Bạn có thể lọc theo tên đối tượng, ví dụ: chỉ xử lý các object có đuôi `.jpeg`.

---

## 🔐 **Yêu cầu về IAM permissions**

### Với SNS:

* Gắn **SNS Resource Access Policy** vào SNS Topic để **S3 có thể gửi message** đến đó.

### Với SQS:

* Gắn **SQS Resource Access Policy** vào queue để cho phép **S3 gửi dữ liệu**.

### Với Lambda:

* Gắn **Lambda Resource Policy** để cho phép **S3 invoke function**.

❗ **Lưu ý**: Không dùng IAM role cho S3 ở đây, mà là **Resource-based policy** trên SNS/SQS/Lambda.

---

## 🌐 **Amazon EventBridge**

* Tất cả các sự kiện từ S3 **đều được gửi vào EventBridge** mặc định.
* EventBridge cho phép:

  * Tạo **rules** nâng cao.
  * Gửi event đến hơn **18 dịch vụ AWS khác nhau**, như:

    * **Step Functions**
    * **Kinesis Data Streams**
    * **Firehose**
  * Hỗ trợ tính năng:

    * **Archive events**
    * **Replay events**
    * **Reliable delivery**
    * **Advanced filtering** theo **metadata, size, name**

---

## 📝 **Ghi nhớ khi học và thi AWS**

* Các **S3 Event Notifications** có thể được gửi tới:

  * **SNS**
  * **SQS**
  * **Lambda**
  * **EventBridge** (tích hợp mạnh hơn)
* **IAM Policy dạng resource-based** là bắt buộc để cấp quyền cho S3.

---

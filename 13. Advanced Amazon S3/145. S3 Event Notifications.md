## ğŸ“¢ **Amazon S3 Event Notifications**

### âœ… **S3 Event lÃ  gÃ¬?**

* **Event (sá»± kiá»‡n)** lÃ  nhá»¯ng hÃ nh Ä‘á»™ng xáº£y ra trong Amazon S3 nhÆ°:

  * **Object Created** (táº¡o Ä‘á»‘i tÆ°á»£ng)
  * **Object Removed** (xÃ³a Ä‘á»‘i tÆ°á»£ng)
  * **Object Restored** (khÃ´i phá»¥c Ä‘á»‘i tÆ°á»£ng)
  * **Replication** (sao chÃ©p)

### âœ… **Má»¥c Ä‘Ã­ch sá»­ dá»¥ng**

* **Tá»± Ä‘á»™ng pháº£n á»©ng** khi cÃ³ sá»± kiá»‡n xáº£y ra trong S3.
* VÃ­ dá»¥: Khi má»™t áº£nh Ä‘Æ°á»£c upload lÃªn S3 â†’ **Tá»± Ä‘á»™ng táº¡o áº£nh thumbnail**.

---

## ğŸ§­ **Event cÃ³ thá»ƒ Ä‘Æ°á»£c gá»­i Ä‘áº¿n cÃ¡c Ä‘Ã­ch (destination):**

1. **SNS Topic**
2. **SQS Queue**
3. **Lambda Function**
4. **Amazon EventBridge**

---

## ğŸ“‚ **Lá»c (Filter) S3 Event**

* Báº¡n cÃ³ thá»ƒ lá»c theo tÃªn Ä‘á»‘i tÆ°á»£ng, vÃ­ dá»¥: chá»‰ xá»­ lÃ½ cÃ¡c object cÃ³ Ä‘uÃ´i `.jpeg`.

---

## ğŸ” **YÃªu cáº§u vá» IAM permissions**

### Vá»›i SNS:

* Gáº¯n **SNS Resource Access Policy** vÃ o SNS Topic Ä‘á»ƒ **S3 cÃ³ thá»ƒ gá»­i message** Ä‘áº¿n Ä‘Ã³.

### Vá»›i SQS:

* Gáº¯n **SQS Resource Access Policy** vÃ o queue Ä‘á»ƒ cho phÃ©p **S3 gá»­i dá»¯ liá»‡u**.

### Vá»›i Lambda:

* Gáº¯n **Lambda Resource Policy** Ä‘á»ƒ cho phÃ©p **S3 invoke function**.

â— **LÆ°u Ã½**: KhÃ´ng dÃ¹ng IAM role cho S3 á»Ÿ Ä‘Ã¢y, mÃ  lÃ  **Resource-based policy** trÃªn SNS/SQS/Lambda.

---

## ğŸŒ **Amazon EventBridge**

* Táº¥t cáº£ cÃ¡c sá»± kiá»‡n tá»« S3 **Ä‘á»u Ä‘Æ°á»£c gá»­i vÃ o EventBridge** máº·c Ä‘á»‹nh.
* EventBridge cho phÃ©p:

  * Táº¡o **rules** nÃ¢ng cao.
  * Gá»­i event Ä‘áº¿n hÆ¡n **18 dá»‹ch vá»¥ AWS khÃ¡c nhau**, nhÆ°:

    * **Step Functions**
    * **Kinesis Data Streams**
    * **Firehose**
  * Há»— trá»£ tÃ­nh nÄƒng:

    * **Archive events**
    * **Replay events**
    * **Reliable delivery**
    * **Advanced filtering** theo **metadata, size, name**

---

## ğŸ“ **Ghi nhá»› khi há»c vÃ  thi AWS**

* CÃ¡c **S3 Event Notifications** cÃ³ thá»ƒ Ä‘Æ°á»£c gá»­i tá»›i:

  * **SNS**
  * **SQS**
  * **Lambda**
  * **EventBridge** (tÃ­ch há»£p máº¡nh hÆ¡n)
* **IAM Policy dáº¡ng resource-based** lÃ  báº¯t buá»™c Ä‘á»ƒ cáº¥p quyá»n cho S3.

---

## ğŸŒ Route 53 - Routing Policies

### 1. **Routing Policy** lÃ  gÃ¬?

* **Routing Policy** giÃºp **Route 53** pháº£n há»“i cÃ¡c **DNS queries**.
* LÆ°u Ã½: ÄÃ¢y **khÃ´ng pháº£i routing** nhÆ° á»Ÿ Load Balancer (tá»©c lÃ  **khÃ´ng Ä‘á»‹nh tuyáº¿n traffic**), mÃ  chá»‰ lÃ  **DNS-level routing** â€“ tráº£ lá»i truy váº¥n Ä‘á»ƒ client biáº¿t nÃªn truy cáº­p endpoint nÃ o.
* **DNS** chá»‰ cÃ³ nhiá»‡m vá»¥ **dá»‹ch tÃªn miá»n thÃ nh Ä‘á»‹a chá»‰ IP (endpoint)**, sau Ä‘Ã³ client sáº½ tá»± gá»­i truy váº¥n HTTP Ä‘áº¿n IP Ä‘Ã³.

---

### 2. Route 53 há»— trá»£ cÃ¡c loáº¡i Routing Policy sau:

* âœ… **Simple**
* âœ… **Weighted**
* âœ… **Failover**
* âœ… **Latency Based**
* âœ… **Geolocation**
* âœ… **Multi-value Answer**
* âœ… **Geoproximity**

---

### 3. ğŸ“Œ **Simple Routing Policy**

* DÃ¹ng Ä‘á»ƒ **Ä‘á»‹nh tuyáº¿n Ä‘áº¿n má»™t resource duy nháº¥t** (vÃ­ dá»¥ 1 EC2 instance).
* VÃ­ dá»¥: client truy cáº­p `foo.example.com` â†’ Route 53 pháº£n há»“i láº¡i 1 hoáº·c nhiá»u Ä‘á»‹a chá»‰ IP.

#### â• Nhiá»u giÃ¡ trá»‹ (multiple values)?

* CÃ³ thá»ƒ cáº¥u hÃ¬nh nhiá»u Ä‘á»‹a chá»‰ IP trong 1 báº£n ghi A.
* Khi Ä‘Ã³ **client sáº½ chá»n ngáº«u nhiÃªn** 1 IP tá»« danh sÃ¡ch nÃ y Ä‘á»ƒ truy cáº­p.

#### â• **Alias Record** Ä‘i kÃ¨m vá»›i Simple Policy?

* Chá»‰ Ä‘á»‹nh Ä‘Æ°á»£c **1 AWS Resource duy nháº¥t** (vÃ­ dá»¥ ALB, CloudFront...).

#### âš ï¸ Giá»›i háº¡n cá»§a Simple Policy:

* **KhÃ´ng thá»ƒ gáº¯n kÃ¨m Health Check**.
* Chá»‰ Ä‘Æ¡n giáº£n tráº£ vá» IP, **khÃ´ng cÃ³ logic thÃ´ng minh** nhÆ° kiá»ƒm tra vÃ¹ng Ä‘á»‹a lÃ½, Ä‘á»™ trá»…, hoáº·c tÃ¬nh tráº¡ng há»‡ thá»‘ng.

---

### 4. ğŸ›  VÃ­ dá»¥ táº¡o Simple Routing Policy trÃªn AWS Console:

* Táº¡o record: `simple.stephanetheteacher.com`
* Loáº¡i: **A Record**
* Value: IP instance á»Ÿ `ap-southeast-1`
* TTL: 20s
* Routing policy: **Simple**

#### ğŸ§ª Test:

* Truy cáº­p URL â†’ Nháº­n "Hello World" tá»« instance.
* DÃ¹ng lá»‡nh `dig` Ä‘á»ƒ xem báº£n ghi DNS pháº£n há»“i.

---

### 5. ğŸ” Cáº­p nháº­t báº£n ghi Ä‘á»ƒ cÃ³ nhiá»u IP:

* ThÃªm thÃªm IP cá»§a instance á»Ÿ `us-east-1`
* Sau TTL (20s) háº¿t háº¡n â†’ `dig` sáº½ tráº£ vá» **2 IP**.
* Má»—i láº§n truy cáº­p website sáº½ **ngáº«u nhiÃªn chá»n 1 IP**, cÃ³ thá»ƒ lÃ  AP hoáº·c US.

---

## âœ… Tá»•ng káº¿t:

* **Simple Routing Policy** lÃ  kiá»ƒu routing Ä‘Æ¡n giáº£n nháº¥t.
* Tráº£ vá» 1 hoáº·c nhiá»u IP â†’ client tá»± chá»n ngáº«u nhiÃªn.
* KhÃ´ng há»— trá»£ health check.
* CÃ³ thá»ƒ dÃ¹ng vá»›i **Alias Record** (chá»‰ 1 AWS Resource).
* PhÃ¹ há»£p khi muá»‘n Ä‘á»‹nh tuyáº¿n cá»‘ Ä‘á»‹nh hoáº·c cÆ¡ báº£n.

---

## üîπ S·ª± kh√°c bi·ªát gi·ªØa **CNAME** v√† **Alias** trong Route 53

### 1. **T√¨nh hu·ªëng ph·ªï bi·∫øn**

Khi b·∫°n c√≥ m·ªôt **AWS Resource** nh∆∞ **Load Balancer** ho·∫∑c **CloudFront**, n√≥ s·∫Ω cung c·∫•p m·ªôt **hostname**. M·ª•c ti√™u c·ªßa b·∫°n l√† √°nh x·∫° hostname n√†y v√†o **domain ri√™ng** nh∆∞: `myapp.mydomain.com`.

### 2. Hai l·ª±a ch·ªçn ch√≠nh:

#### a. **CNAME Record**

* Cho ph√©p √°nh x·∫° m·ªôt **hostname** ‚Üí m·ªôt **hostname kh√°c**.

  * V√≠ d·ª•: `app.mydomain.com` ‚Üí `blabla.anything.com`
* **Ch·ªâ d√πng ƒë∆∞·ª£c** cho **subdomain** (v√≠ d·ª•: `something.mydomain.com`).
* **Kh√¥ng th·ªÉ d√πng t·∫°i root domain** (zone apex) nh∆∞ `mydomain.com`.

#### b. **Alias Record** (ch·ªâ c√≥ ·ªü Route 53)

* Cho ph√©p √°nh x·∫° hostname ‚Üí **AWS Resource** nh∆∞ `*.amazonaws.com`.
* **H·ªó tr·ª£ c·∫£ root domain v√† subdomain** (kh√°c v·ªõi CNAME).
* Alias Record l√† lo·∫°i m·ªü r·ªông c·ªßa DNS truy·ªÅn th·ªëng.
* Alias Record ch·ªâ c√≥ **type A ho·∫∑c AAAA** (IPv4 ho·∫∑c IPv6).
* **Kh√¥ng c·∫ßn set TTL**, TTL s·∫Ω do Route 53 qu·∫£n l√Ω t·ª± ƒë·ªông.
* **Mi·ªÖn ph√≠ khi truy v·∫•n** (so v·ªõi CNAME c√≥ th·ªÉ t√≠nh ph√≠ DNS).
* **H·ªó tr·ª£ t√≠ch h·ª£p Health Check**.

---

## üî∏ C√°c lo·∫°i **AWS Resource** m√† Alias Record h·ªó tr·ª£:

* **Elastic Load Balancer (ELB)**
* **CloudFront Distribution**
* **API Gateway**
* **Elastic Beanstalk environment**
* **S3 Website** (ch·ªâ website, kh√¥ng ph·∫£i bucket th√¥ng th∆∞·ªùng)
* **VPC Interface Endpoint**
* **Global Accelerator**
* **Route 53 records trong c√πng hosted zone**

‚ö†Ô∏è **L∆∞u √Ω quan tr·ªçng**:
Kh√¥ng th·ªÉ d√πng Alias cho **EC2 DNS name**.

---

## üîπ Demo tr√™n Route 53 Console

### T·∫°o **CNAME record**:

* T·∫°o `myapp.stephanetheteacher.com` ki·ªÉu **CNAME**
* Tr·ªè ƒë·∫øn hostname c·ªßa m·ªôt **ALB**
* Truy c·∫≠p th√†nh c√¥ng ‚Üí n·ªôi dung tr·∫£ v·ªÅ l√† ‚ÄúHello World‚Äù t·ª´ EC2 instance n·∫±m sau Load Balancer

üìå Tuy nhi√™n, **CNAME kh√¥ng ph·∫£i l√† native AWS**, kh√¥ng h·ªó tr·ª£ t·∫°i **apex domain**.

---

### T·∫°o **Alias record**:

* T·∫°o `myalias.stephanetheteacher.com` ki·ªÉu **A (Alias)**
* Tr·ªè ƒë·∫øn **ALB**
* Route 53 t·ª± ƒë·ªông x·ª≠ l√Ω alias ‚Üí c√≥ th·ªÉ b·∫≠t t√πy ch·ªçn **Evaluate target health**
* Truy c·∫≠p `myalias.stephanetheteacher.com` ‚Üí ho·∫°t ƒë·ªông t∆∞∆°ng t·ª± CNAME, nh∆∞ng l√† **native AWS**, **mi·ªÖn ph√≠**, v√† h·ªó tr·ª£ **health check**

---

### Tr∆∞·ªùng h·ª£p **Zone Apex (root domain)**:

* Kh√¥ng th·ªÉ d√πng **CNAME** cho `stephanetheteacher.com` (Route 53 b√°o l·ªói: "CNAME is not permitted at apex of this zone")
* **Gi·∫£i ph√°p**: d√πng **Alias record**, ki·ªÉu **A**, tr·ªè ƒë·∫øn ALB ‚Üí ho·∫°t ƒë·ªông th√†nh c√¥ng

---

## ‚úÖ T·ªïng k·∫øt

| Thu·ªôc t√≠nh           | CNAME    | Alias        |
| -------------------- | -------- | ------------ |
| Tr·ªè ƒë·∫øn              | Hostname | AWS Resource |
| D√πng cho root domain | ‚ùå Kh√¥ng  | ‚úÖ C√≥         |
| H·ªó tr·ª£ Health Check  | ‚ùå Kh√¥ng  | ‚úÖ C√≥         |
| T√≠nh ph√≠ truy v·∫•n    | ‚úÖ C√≥     | ‚úÖ Mi·ªÖn ph√≠   |
| H·ªó tr·ª£ TTL tu·ª≥ ch·ªânh | ‚úÖ C√≥     | ‚ùå Kh√¥ng      |
| AWS native           | ‚ùå Kh√¥ng  | ‚úÖ C√≥         |
| H·ªó tr·ª£ EC2 DNS       | ‚úÖ C√≥     | ‚ùå Kh√¥ng      |

---